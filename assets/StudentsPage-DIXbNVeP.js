import{a as x,j as e}from"./index-D6mZ5jKc.js";import"./react-vendor-DzKpeQDD.js";const p=()=>{const{students:o,refreshStudents:l}=x(),i="/iaev/iaev/api",n=async(s,a)=>{if(confirm(`¿Estás seguro de cambiar el estado a ${a}?`))try{const d=await(await fetch(`${i}/admin.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update_user_status",user_id:s,status:a})})).json();d.success?l():alert("Error al actualizar estado: "+d.message)}catch(r){console.error("Failed to update status",r)}},c=async s=>{if(confirm("¿Estás seguro de eliminar este usuario? Esta acción no se puede deshacer."))try{const r=await(await fetch(`${i}/admin.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete_user",user_id:s})})).json();r.success?l():alert("Error al eliminar usuario: "+r.message)}catch(a){console.error("Failed to delete user",a)}},t=o.map(s=>({id:s.id,name:s.name,email:s.email,enrolledCourses:0,progress:Math.min(100,(s.level||1)*5),lastActive:"Reciente",status:s.status||"active"}));return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Estudiantes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona y monitorea el progreso de tus alumnos."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"px-4 py-2 bg-white text-gray-700 rounded-xl border border-gray-200 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[e.jsx("ion-icon",{name:"download-outline"}),"Exportar"]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-lg shadow-blue-600/20",children:[e.jsx("ion-icon",{name:"person-add-outline"}),"Invitar Alumno"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"glass p-6 rounded-2xl flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center text-2xl",children:e.jsx("ion-icon",{name:"people"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Total Estudiantes"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:t.length})]})]}),e.jsxs("div",{className:"glass p-6 rounded-2xl flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 text-green-600 rounded-xl flex items-center justify-center text-2xl",children:e.jsx("ion-icon",{name:"pulse"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Activos"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:t.filter(s=>s.status==="active").length})]})]}),e.jsxs("div",{className:"glass p-6 rounded-2xl flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 text-purple-600 rounded-xl flex items-center justify-center text-2xl",children:e.jsx("ion-icon",{name:"trophy"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Suspendidos"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:t.filter(s=>s.status==="suspended").length})]})]})]}),e.jsxs("div",{className:"glass rounded-2xl overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-6 border-b border-white/20 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"Lista de Alumnos"}),e.jsxs("div",{className:"relative",children:[e.jsx("ion-icon",{name:"search-outline",class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar estudiante...",className:"pl-10 pr-4 py-2 bg-white/50 border border-white/60 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm w-64"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white/30 border-b border-white/20",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Estudiante"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Cursos"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Progreso"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-white/20",children:t.map(s=>e.jsxs("tr",{className:"hover:bg-white/40 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-xs shadow-sm",children:s.name.substring(0,2).toUpperCase()}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.enrolledCourses}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden mr-2",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${s.progress}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.progress,"%"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.status==="active"?"bg-green-100 text-green-800":s.status==="suspended"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status==="active"?"Activo":s.status==="suspended"?"Suspendido":"Inactivo"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.status==="active"?e.jsx("button",{onClick:()=>n(s.id,"suspended"),className:"text-yellow-600 hover:text-yellow-900 mr-3",title:"Suspender",children:e.jsx("ion-icon",{name:"pause-outline"})}):e.jsx("button",{onClick:()=>n(s.id,"active"),className:"text-green-600 hover:text-green-900 mr-3",title:"Activar",children:e.jsx("ion-icon",{name:"play-outline"})}),e.jsx("button",{onClick:()=>c(s.id),className:"text-gray-400 hover:text-red-600",title:"Eliminar",children:e.jsx("ion-icon",{name:"trash-outline"})})]})]},s.id))})]})}),e.jsxs("div",{className:"p-4 border-t border-white/20 flex justify-between items-center text-sm text-gray-500",children:[e.jsxs("span",{children:["Mostrando ",t.length," estudiantes"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-3 py-1 border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:!0,children:"Anterior"}),e.jsx("button",{className:"px-3 py-1 border border-gray-200 rounded-lg hover:bg-gray-50",children:"Siguiente"})]})]})]})]})};export{p as default};
