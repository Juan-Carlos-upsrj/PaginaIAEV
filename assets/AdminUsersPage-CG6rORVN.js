import{a as q,j as e}from"./index-BElKbzOc.js";import{b as n}from"./react-vendor-DzKpeQDD.js";const D=()=>{const{teachers:b,createTeacher:v,assignCourseToTeacher:N,quarters:c,updateTeacher:w}=q(),[C,x]=n.useState(!1),[s,i]=n.useState({name:"",email:"",password:"",bio:""}),[S,u]=n.useState(!1),[h,p]=n.useState(null),[g,y]=n.useState(""),[m,f]=n.useState("all"),[l,d]=n.useState(null),j=n.useMemo(()=>{const r=[];return c.forEach(a=>{a.subjects.forEach(t=>{const o=t.name.toLowerCase();!o.includes("inglés")&&!o.includes("desarrollo humano")&&r.push({...t,quarterName:a.name,quarterId:a.id})})}),r},[c]).filter(r=>{const a=r.name.toLowerCase().includes(g.toLowerCase())||r.id.toLowerCase().includes(g.toLowerCase()),t=m==="all"||r.quarterId===m;return a&&t}),k=n.useMemo(()=>{const r={};return j.forEach(a=>{r[a.quarterName]||(r[a.quarterName]=[]),r[a.quarterName].push(a)}),r},[j]),T=r=>{r.preventDefault(),v({name:s.name,email:s.email,bio:s.bio,avatar:`https://ui-avatars.com/api/?name=${s.name}&background=random`}),i({name:"",email:"",password:"",bio:""}),x(!1)},A=r=>{p(r),u(!0),y(""),f("all")},z=r=>{if(h){let a=0;for(let o=0;o<r.length;o++)a=r.charCodeAt(o)+((a<<5)-a);const t=Math.abs(a);N(h,t),u(!1),p(null)}},E=r=>{r.preventDefault(),l&&(w(l),d(null))},M=r=>`Materia #${r}`;return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gestión de Docentes"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Administra las cuentas de profesores y sus asignaciones."})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-lg shadow-blue-500/30",children:[e.jsx("ion-icon",{name:"person-add-outline"}),"Nuevo Profesor"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[b.map(r=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:r.avatar||`https://ui-avatars.com/api/?name=${r.name}`,alt:r.name,className:"w-12 h-12 rounded-full ring-2 ring-white dark:ring-gray-700 shadow-sm"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:r.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(r),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar profesor",children:e.jsx("ion-icon",{name:"create-outline",style:{fontSize:"20px"}})}),e.jsx("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 text-xs rounded-full font-medium",children:"Docente"})]})]}),e.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-4 mt-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:"Materias Asignadas"}),r.assignedCourses&&r.assignedCourses.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:r.assignedCourses.map(a=>e.jsx("span",{className:"px-2 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 text-xs rounded-md border border-blue-100 dark:border-blue-800",children:M(a)},a))}):e.jsx("p",{className:"text-sm text-gray-400 italic",children:"Sin asignaciones"}),e.jsx("div",{className:"mt-4 pt-2",children:e.jsxs("button",{className:"w-full py-2 text-sm text-blue-600 dark:text-blue-400 border border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors flex items-center justify-center gap-2",onClick:()=>A(r.id),children:[e.jsx("ion-icon",{name:"add-circle-outline"}),"Asignar Materia"]})})]})]},r.id)),b.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-gray-400 mb-3",children:e.jsx("ion-icon",{name:"people-outline",style:{fontSize:"48px"}})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"No hay profesores registrados"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Comienza creando una cuenta para un docente."})]})]}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl border border-gray-100 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Registrar Nuevo Profesor"}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre Completo"}),e.jsx("input",{type:"text",required:!0,value:s.name,onChange:r=>i({...s,name:r.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Correo Institucional (@iaev.mx)"}),e.jsx("input",{type:"email",required:!0,value:s.email,onChange:r=>i({...s,email:r.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contraseña Temporal"}),e.jsx("input",{type:"password",required:!0,value:s.password,onChange:r=>i({...s,password:r.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Crear Profesor"})]})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl border border-gray-100 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Editar Profesor"}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre Completo"}),e.jsx("input",{type:"text",required:!0,value:l.name,onChange:r=>d({...l,name:r.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Correo"}),e.jsx("input",{type:"email",required:!0,value:l.email,onChange:r=>d({...l,email:r.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Biografía"}),e.jsx("textarea",{value:l.bio||"",onChange:r=>d({...l,bio:r.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>d(null),className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Guardar Cambios"})]})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-lg shadow-2xl border border-gray-100 dark:border-gray-700 flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Asignar Materia"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx("ion-icon",{name:"close-outline",style:{fontSize:"24px"}})})]}),e.jsxs("div",{className:"mb-4 space-y-3",children:[e.jsxs("select",{value:m,onChange:r=>f(r.target.value==="all"?"all":Number(r.target.value)),className:"w-full px-3 py-2 border rounded-xl dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:[e.jsx("option",{value:"all",children:"Todos los Cuatrimestres"}),c.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsxs("div",{className:"relative",children:[e.jsx("ion-icon",{name:"search-outline",class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar materia por nombre o código...",value:g,onChange:r=>y(r.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-xl dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2",children:Object.keys(k).length>0?Object.entries(k).map(([r,a])=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 sticky top-0 bg-white dark:bg-gray-800 py-1 z-10",children:r}),e.jsx("div",{className:"space-y-2",children:a.map(t=>e.jsx("button",{onClick:()=>z(t.id),className:"w-full text-left p-3 rounded-xl hover:bg-blue-50 dark:hover:bg-blue-900/20 border border-transparent hover:border-blue-100 dark:hover:border-blue-800 transition-all group",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.id})]}),e.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-xs rounded text-gray-600 dark:text-gray-300",children:[t.credits," Créditos"]})]})},t.id))})]},r)):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No se encontraron materias."})})})]})})]})};export{D as default};
