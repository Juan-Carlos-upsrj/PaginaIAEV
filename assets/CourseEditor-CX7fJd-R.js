import{j as e,b as E,u as I}from"./index-D6mZ5jKc.js";import{b as w,d as L,u as A}from"./react-vendor-DzKpeQDD.js";const M=({quiz:m,onSave:p,onCancel:v})=>{const[h,x]=w.useState(m||{id:Date.now(),title:"Nuevo Quiz",questions:[]}),N=()=>{const r={id:Date.now(),text:"",answers:[{id:Date.now(),text:"",isCorrect:!1},{id:Date.now()+1,text:"",isCorrect:!1}]};x(o=>({...o,questions:[...o.questions,r]}))},C=(r,o)=>{x(n=>({...n,questions:n.questions.map(d=>d.id===r?{...d,text:o}:d)}))},f=r=>{x(o=>({...o,questions:o.questions.filter(n=>n.id!==r)}))},c=r=>{x(o=>({...o,questions:o.questions.map(n=>n.id===r?{...n,answers:[...n.answers,{id:Date.now(),text:"",isCorrect:!1}]}:n)}))},u=(r,o,n,d)=>{x(y=>({...y,questions:y.questions.map(j=>j.id===r?{...j,answers:j.answers.map(g=>g.id===o?{...g,[n]:d}:g)}:j)}))},k=(r,o)=>{x(n=>({...n,questions:n.questions.map(d=>d.id===r?{...d,answers:d.answers.filter(y=>y.id!==o)}:d)}))};return e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-200 mt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Editor de Quiz"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:v,className:"px-3 py-1 text-gray-500 hover:bg-gray-100 rounded-lg",children:"Cancelar"}),e.jsx("button",{onClick:()=>p(h),className:"px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Guardar Quiz"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título del Quiz"}),e.jsx("input",{type:"text",value:h.title,onChange:r=>x({...h,title:r.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 outline-none"})]}),e.jsxs("div",{className:"space-y-6",children:[h.questions.map((r,o)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between mb-3",children:[e.jsxs("span",{className:"font-bold text-gray-500",children:["Pregunta ",o+1]}),e.jsx("button",{onClick:()=>f(r.id),className:"text-red-400 hover:text-red-600",children:e.jsx("ion-icon",{name:"trash-outline"})})]}),e.jsx("input",{type:"text",value:r.text,onChange:n=>C(r.id,n.target.value),placeholder:"Escribe la pregunta...",className:"w-full px-3 py-2 mb-3 bg-white rounded-lg border border-gray-300 focus:border-green-500 outline-none"}),e.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-gray-200",children:[r.answers.map(n=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:n.isCorrect,onChange:d=>u(r.id,n.id,"isCorrect",d.target.checked),className:"w-5 h-5 text-green-600 rounded focus:ring-green-500"}),e.jsx("input",{type:"text",value:n.text,onChange:d=>u(r.id,n.id,"text",d.target.value),placeholder:"Respuesta...",className:`flex-1 px-3 py-1 rounded-lg border ${n.isCorrect?"border-green-500 bg-green-50":"border-gray-300 bg-white"} outline-none`}),e.jsx("button",{onClick:()=>k(r.id,n.id),className:"text-gray-400 hover:text-red-500",children:e.jsx("ion-icon",{name:"close-circle-outline"})})]},n.id)),e.jsx("button",{onClick:()=>c(r.id),className:"text-sm text-blue-500 hover:underline mt-2",children:"+ Añadir respuesta"})]})]},r.id)),e.jsx("button",{onClick:N,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-green-500 hover:text-green-600 transition-colors",children:"+ Añadir Pregunta"})]})]})},R=()=>{const{courseId:m}=L(),p=A(),{getCourse:v,addCourse:h,updateCourse:x}=E(),{user:N,assignCourse:C}=I(),f=!m||m==="new",[c,u]=w.useState({id:Date.now(),title:"",subtitle:"",description:"",thumbnail:"",modules:[]}),[k,r]=w.useState(null);w.useEffect(()=>{if(!f&&m){const t=v(Number(m));t?u(t):p("/admin")}},[m,f,v,p]);const o=()=>{if(!c.title)return alert("El título es obligatorio");if(f){const t={...c,instructorId:N==null?void 0:N.id};h(t),C(t.id)}else x(c);p("/admin")},n=()=>{const t={id:Date.now(),title:"Nuevo Módulo",lessons:[]};u(l=>({...l,modules:[...l.modules,t]}))},d=(t,l)=>{u(s=>({...s,modules:s.modules.map(i=>i.id===t?{...i,title:l}:i)}))},y=t=>{confirm("¿Eliminar módulo?")&&u(l=>({...l,modules:l.modules.filter(s=>s.id!==t)}))},j=t=>{const l={id:Date.now(),title:"Nueva Lección",videoId:"",duration:"0:00",description:""};u(s=>({...s,modules:s.modules.map(i=>i.id===t?{...i,lessons:[...i.lessons,l]}:i)}))},g=(t,l,s,i)=>{u(a=>({...a,modules:a.modules.map(b=>b.id===t?{...b,lessons:b.lessons.map(z=>z.id===l?{...z,[s]:i}:z)}:b)}))},Q=(t,l)=>{u(s=>({...s,modules:s.modules.map(i=>i.id===t?{...i,lessons:i.lessons.filter(a=>a.id!==l)}:i)}))},D=(t,l,s)=>{u(i=>({...i,modules:i.modules.map(a=>a.id===t?{...a,lessons:a.lessons.map(b=>b.id===l?{...b,quiz:s}:b)}:a)})),r(null)};return e.jsxs("div",{className:"max-w-4xl mx-auto pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:f?"Crear Nuevo Curso":"Editar Curso"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>p("/admin"),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-lg shadow-blue-600/20 font-medium",children:"Guardar Curso"})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"Información Básica"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título del Curso"}),e.jsx("input",{type:"text",value:c.title,onChange:t=>u({...c,title:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",placeholder:"Ej. Introducción a React"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subtítulo Corto"}),e.jsx("input",{type:"text",value:c.subtitle,onChange:t=>u({...c,subtitle:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",placeholder:"Ej. Aprende las bases en 30 minutos"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción Completa"}),e.jsx("textarea",{value:c.description,onChange:t=>u({...c,description:t.target.value}),rows:4,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",placeholder:"Describe de qué trata el curso..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL de Miniatura (Opcional)"}),e.jsx("input",{type:"text",value:c.thumbnail||"",onChange:t=>u({...c,thumbnail:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",placeholder:"https://..."})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Contenido del Curso"}),e.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:[e.jsx("ion-icon",{name:"add-outline"}),"Añadir Módulo"]})]}),c.modules.map((t,l)=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-200 flex items-center gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center text-gray-500 font-bold border border-gray-200",children:l+1}),e.jsx("input",{type:"text",value:t.title,onChange:s=>d(t.id,s.target.value),className:"flex-1 bg-transparent font-bold text-gray-800 focus:bg-white px-2 py-1 rounded focus:ring-2 focus:ring-blue-500 outline-none"}),e.jsx("button",{onClick:()=>y(t.id),className:"text-gray-400 hover:text-red-500 p-2",children:e.jsx("ion-icon",{name:"trash-outline"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[t.lessons.map((s,i)=>e.jsxs("div",{className:"flex flex-col gap-3 p-4 rounded-xl border border-gray-100 bg-gray-50/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:["Lección ",i+1]}),e.jsx("button",{onClick:()=>Q(t.id,s.id),className:"ml-auto text-xs text-red-400 hover:text-red-600",children:"Eliminar"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",value:s.title,onChange:a=>g(t.id,s.id,"title",a.target.value),placeholder:"Título de la lección",className:"w-full px-3 py-2 bg-white rounded-lg border border-gray-200 text-sm focus:border-blue-500 outline-none"}),e.jsx("input",{type:"text",value:s.videoId,onChange:a=>g(t.id,s.id,"videoId",a.target.value),placeholder:"ID de YouTube (ej. M7lc1UVf-VE)",className:"w-full px-3 py-2 bg-white rounded-lg border border-gray-200 text-sm focus:border-blue-500 outline-none font-mono"}),e.jsx("input",{type:"text",value:s.duration,onChange:a=>g(t.id,s.id,"duration",a.target.value),placeholder:"Duración (ej. 5:00)",className:"w-full px-3 py-2 bg-white rounded-lg border border-gray-200 text-sm focus:border-blue-500 outline-none"}),e.jsx("input",{type:"text",value:s.description,onChange:a=>g(t.id,s.id,"description",a.target.value),placeholder:"Descripción breve",className:"w-full px-3 py-2 bg-white rounded-lg border border-gray-200 text-sm focus:border-blue-500 outline-none"})]}),e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:k===s.id?e.jsx(M,{quiz:s.quiz,onSave:a=>D(t.id,s.id,a),onCancel:()=>r(null)}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("ion-icon",{name:"help-circle-outline",class:"text-purple-500"}),s.quiz?e.jsxs("span",{className:"text-green-600 font-medium",children:["Quiz configurado (",s.quiz.questions.length," preguntas)"]}):e.jsx("span",{children:"Sin Quiz"})]}),e.jsx("button",{onClick:()=>r(s.id),className:`text-sm font-medium px-3 py-1 rounded-lg transition-colors ${s.quiz?"bg-purple-50 text-purple-600 hover:bg-purple-100":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.quiz?"Editar Quiz":"Añadir Quiz"})]})})]},s.id)),e.jsxs("button",{onClick:()=>j(t.id),className:"w-full py-3 border-2 border-dashed border-gray-200 rounded-xl text-gray-500 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center gap-2 font-medium text-sm",children:[e.jsx("ion-icon",{name:"add-circle-outline",class:"w-5 h-5"}),"Añadir Lección"]})]})]},t.id))]})]})]})};export{R as default};
