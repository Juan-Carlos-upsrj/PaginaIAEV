import{u as y,j as e}from"./index-BElKbzOc.js";import{b as i}from"./react-vendor-DzKpeQDD.js";const D=()=>{const{user:d}=y(),[t,o]=i.useState(new Date),[x,m]=i.useState([]),g="/iaev/api";useEffect(()=>{h()},[]);const h=async()=>{try{const s=await(await fetch(`${g}/student.php?action=get_calendar_events`)).json();if(s.success){const r=s.events.map(l=>({...l,date:new Date(l.date)}));m(r)}}catch(a){console.error("Failed to fetch events",a)}},u=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),b=new Date(t.getFullYear(),t.getMonth(),1).getDay(),p=()=>{o(new Date(t.getFullYear(),t.getMonth()-1,1))},f=()=>{o(new Date(t.getFullYear(),t.getMonth()+1,1))},j=a=>x.filter(s=>s.date.getDate()===a&&s.date.getMonth()===t.getMonth()&&s.date.getFullYear()===t.getFullYear()),v=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return d?e.jsxs("div",{className:"min-h-screen bg-transparent pb-20",children:[e.jsx("header",{className:"sticky top-4 z-50 mx-4 mb-8 rounded-2xl glass shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("a",{href:"/dashboard",className:"p-2 rounded-xl hover:bg-blue-50 text-blue-600 transition-colors",children:e.jsx("ion-icon",{name:"arrow-back-outline",class:"w-6 h-6"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Calendario Académico"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:p,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("ion-icon",{name:"chevron-back-outline"})}),e.jsxs("h2",{className:"text-xl font-bold text-gray-800 w-40 text-center",children:[v[t.getMonth()]," ",t.getFullYear()]}),e.jsx("button",{onClick:f,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("ion-icon",{name:"chevron-forward-outline"})})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("div",{className:"grid grid-cols-7 mb-4",children:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"].map(a=>e.jsx("div",{className:"text-center font-bold text-gray-500 text-sm uppercase tracking-wider py-2",children:a},a))}),e.jsxs("div",{className:"grid grid-cols-7 gap-2 sm:gap-4",children:[Array.from({length:b}).map((a,s)=>e.jsx("div",{className:"h-24 sm:h-32 bg-gray-50/50 rounded-xl"},`empty-${s}`)),Array.from({length:u}).map((a,s)=>{const r=s+1,l=j(r),c=r===new Date().getDate()&&t.getMonth()===new Date().getMonth()&&t.getFullYear()===new Date().getFullYear();return e.jsxs("div",{className:`h-24 sm:h-32 bg-white/60 border border-white/50 rounded-xl p-2 transition-all hover:shadow-md overflow-y-auto custom-scrollbar ${c?"ring-2 ring-blue-500 ring-offset-2":""}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-1",children:e.jsx("span",{className:`text-sm font-bold w-6 h-6 flex items-center justify-center rounded-full ${c?"bg-blue-500 text-white":"text-gray-700"}`,children:r})}),e.jsx("div",{className:"space-y-1",children:l.map(n=>e.jsx("div",{className:`text-[10px] sm:text-xs p-1.5 rounded-lg border truncate ${n.type==="assignment"?"bg-red-50 text-red-700 border-red-100":n.type==="quiz"?"bg-yellow-50 text-yellow-700 border-yellow-100":"bg-blue-50 text-blue-700 border-blue-100"}`,title:n.title,children:n.title},n.id))})]},r)})]})]}),e.jsxs("div",{className:"mt-6 flex gap-6 justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Entregas"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Exámenes"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Clases en Vivo"})]})]})]})]}):null};export{D as default};
